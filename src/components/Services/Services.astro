---
import { Image } from "astro:assets";
import Button from "../shared/Button.astro";
import Headline from "../shared/Headline.astro";
import Wrapper from "../shared/Wrapper.astro";
import "./services.scss";
import ServiceSlider from "./ServiceSlider/ServiceSlider";

import wideBrushSwatch from "../../assets/wide-brush-swatch.png";
import brushstrokeGreen from "../../assets/brushstroke-green.png";
import angleBrush from "../../assets/angle-brush-2.png";
const {
  title,
  content,
  services,
  howToWorkTitle,
  stepOneBold,
  stepOneContent,
  stepTwoBold,
  stepTwoContent,
  stepThreeBold,
  stepThreeContent,
  buttonText,
  buttonType,
  buttonLink,
  buttonUrl,
  bottomImage,
} = Astro.props.data;

let linkHref = "#";

if (buttonType?.includes("internal") && buttonLink?.edges?.length) {
  linkHref = buttonLink.edges[0].node.uri;
} else if (buttonType?.includes("external") && buttonUrl) {
  linkHref = buttonUrl;
}

const bottomImageSrc = bottomImage?.node?.sourceUrl;
const bottomImageAlt = bottomImage?.node?.altText || "";
---

<div class="services">
  <Wrapper>
    <div class="services-intro">
      <div class="services-intro-title">
        <Headline ele="h2" hlstyle="two">{title}</Headline>
      </div>
      <div class="services-intro-content" set:html={content} />
    </div>
  </Wrapper>
  <div class="services-slider-wrap">
    <ServiceSlider client:only="react" services={services} />
    <div class="services-slider-wrap-brush">
      <img src={angleBrush.src} alt="" />
    </div>
  </div>
  <div class="services-work">
    <div class="services-work-container">
      <div class="services-work-title">
        <h2>{howToWorkTitle}</h2>
      </div>
      <div class="services-work-steps">
        <div class="services-work-steps-step step-one">
          <div class="services-work-steps-step-number">
            <p>Step 1</p>
          </div>
          <div class="services-work-steps-step-content">
            <p>{stepOneBold}</p>
            <p>{stepOneContent}</p>
          </div>
        </div>
        <div class="services-work-steps-step step-two">
          <div class="services-work-steps-step-number">
            <p>Step 2</p>
          </div>
          <div class="services-work-steps-step-content">
            <p>{stepTwoBold}</p>
            <p>{stepTwoContent}</p>
          </div>
        </div>
        <div class="services-work-steps-step step-three">
          <div class="services-work-steps-step-number">
            <p>Step 3</p>
          </div>
          <div class="services-work-steps-step-content">
            <p>{stepThreeBold}</p>
            <p>{stepThreeContent}</p>
          </div>
        </div>
      </div>
    </div>

    {
      linkHref && (
        <div class="services-work-button">
          <Button
            ele="a"
            btnstyle="two"
            href={linkHref}
            rel={
              buttonType?.includes("external")
                ? "noopener noreferrer"
                : undefined
            }
          >
            {buttonText}
          </Button>
        </div>
      )
    }
    <div class="services-work-brush">
      <img src={wideBrushSwatch.src} alt="" />
    </div>
  </div>
  <div class="services-image">
    <div class="services-image-container">
      <Image
        src={bottomImageSrc}
        alt={bottomImageAlt}
        format="webp"
        widths={[800, 1200, 1600, 2000]}
        sizes="100vw"
        loading="eager"
        inferSize={true}
        class="services-image-img"
      />
    </div>
  </div>
  <div class="services-brush-green">
    <img src={brushstrokeGreen.src} alt="" />
  </div>
</div>
